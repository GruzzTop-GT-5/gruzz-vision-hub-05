# Полная спецификация приложения GT WorkHub

## Общее описание
GT WorkHub - платформа для поиска работы и заказа услуг с внутренней валютой GT (1 GT = 1 ₽). Все цены фиксированные, без комиссий. Управление через админ-панель.

---

## 1. СИСТЕМА ВАЛЮТЫ И ПЛАТЕЖЕЙ

### Внутренняя валюта GT
- **1 GT = 1 ₽** (фиксированный курс)
- Пополнение баланса через администратора
- Все транзакции в GT
- Фиксированные цены (без комиссий)

### Типы транзакций
- `deposit` - пополнение баланса
- `withdrawal` - вывод средств
- `order_payment` - оплата заказа
- `order_refund` - возврат средств

### Статусы транзакций
- `pending` - ожидает обработки
- `completed` - завершена
- `failed` - отклонена

---

## 2. СИСТЕМА РОЛЕЙ

### Роли пользователей
1. **user** - обычный пользователь
2. **moderator** - модератор контента
3. **support** - служба поддержки
4. **admin** - администратор
5. **system_admin** - системный администратор

### Права доступа
- **user**: создание заказов, объявлений, работа с балансом
- **moderator**: модерация объявлений, отзывов, сообщений
- **support**: работа с тикетами поддержки
- **admin**: управление заказами, транзакциями, пользователями
- **system_admin**: полный доступ ко всем функциям

---

## 3. ГЛАВНАЯ СТРАНИЦА (Index.tsx)

### Hero секция
- Заголовок: "Найдите работу или закажите услуги"
- Подзаголовок: "Платформа для поиска работников и заказчиков"
- Градиентный фон с анимацией
- Иконка Briefcase

### Основные действия (3 карточки)
1. **Создать заказ**
   - Иконка: PlusCircle
   - Текст: "Создайте заказ и найдите исполнителя"
   - Кнопка: "Создать заказ"
   - Градиент: primary цвета

2. **Мои заказы**
   - Иконка: ListChecks
   - Текст: "Управляйте своими заказами"
   - Кнопка: "Мои заказы"
   - Градиент: accent цвета

3. **Поиск работы**
   - Иконка: Search
   - Текст: "Найдите подходящую работу"
   - Кнопка: "Найти работу"
   - Градиент: secondary цвета

### Информационная карточка
- **1 GT = 1 ₽**
- Иконка: Coins
- Описание внутренней валюты
- Фиолетовый градиент

### Секция "Как это работает" (4 шага)
1. **Создайте заказ**
   - Иконка: FileText
   - Описание всех типов заказов

2. **Найдите исполнителя**
   - Иконка: Users
   - Квалифицированные специалисты

3. **Оплатите работу**
   - Иконка: CreditCard
   - Через внутренний баланс GT

4. **Оставьте отзыв**
   - Иконка: Star
   - После выполнения работы

### Секция преимуществ
1. Фиксированные цены
2. Быстрый поиск
3. Безопасные платежи
4. Проверенные специалисты

---

## 4. ТИПЫ ЗАКАЗОВ И УСЛУГ

### 4.1 Заказ грузчиков (CreateOrderModal)
**Поля:**
- Тип работы: dropdown (Погрузка/разгрузка, Переезд, Сборка мебели, Другое)
- Количество грузчиков: number (1-10)
- Дата: date picker
- Время начала: time
- Время окончания: time
- Адрес: text
- Описание: textarea

**Расчет стоимости:**
```
Базовая ставка = 500 GT/час на человека
Итого = Количество грузчиков × Часы × 500 GT
```

**Дополнительное оборудование (опционально):**
- Тележка (+200 GT)
- Стропы (+150 GT)
- Инструменты (+300 GT)

### 4.2 Аренда компрессора (CreateCompressorRentModal)
**Поля:**
- Тип компрессора: dropdown
  - Винтовой (3000 GT/день)
  - Поршневой (2000 GT/день)
  - Дизельный передвижной (4000 GT/день)
- Производительность: text
- Длительность аренды: number (часы)
- Дата: date picker
- Время: time
- Адрес доставки: text
- Нужна доставка: radio (Да +1500 GT / Нет)
- Описание: textarea

**Расчет стоимости:**
```
Базовая цена за день
+ Доставка (если выбрано)
Итого в GT
```

### 4.3 Вывоз мусора (CreateGarbageRemovalModal)
**Поля:**
- Тип мусора: dropdown
  - Строительный (3000 GT)
  - Бытовой (2000 GT)
  - Крупногабаритный (2500 GT)
- Объем: dropdown
  - 1-2 контейнера (×1)
  - 1 Газель (×1.5)
  - 1 КАМАЗ (×3)
  - Другой объем (custom)
- Пользовательский объем: text (если выбрано "Другой")
- Нужна погрузка: radio (Да +1500 GT / Нет)
- Дата: date picker
- Время: time
- Адрес: text
- Описание: textarea

**Расчет стоимости:**
```
Базовая цена типа мусора × Коэффициент объема + Погрузка
Итого в GT и ₽
```

### 4.4 Комплексная услуга (CreateComplexServiceModal)
**Поля:**
- Название услуги: text
- Категория: dropdown
- Описание: textarea
- Ориентировочная стоимость: number GT
- Дата: date picker
- Время: time
- Адрес: text

**Дополнительные услуги (чекбоксы):**
- Консультация (+500 GT)
- Выезд на объект (+1000 GT)
- Срочное выполнение (+1500 GT)

**Расчет стоимости:**
```
Базовая стоимость + Сумма выбранных доп. услуг
Итого в GT и ₽
```

### 4.5 Создание обычного заказа
Все типы доступны через главную кнопку "Создать заказ"

---

## 5. СТРАНИЦА ПРОФИЛЯ (Profile.tsx)

### Заголовок
- Gradient фон
- Иконка: User
- Заголовок: "Профиль пользователя"

### Блоки информации
1. **Карточка баланса**
   - Текущий баланс в GT
   - Кнопка "Пополнить баланс"
   - История транзакций

2. **Основная информация**
   - Аватар пользователя
   - Имя/Ник
   - Рейтинг (звезды)
   - Email
   - Телефон
   - Дата регистрации

3. **Статистика**
   - Выполненных заказов
   - Средний рейтинг
   - Отзывов получено

4. **Действия**
   - Редактировать профиль
   - Мои заказы
   - Мои объявления
   - История транзакций

---

## 6. ДОСТУПНЫЕ ЗАКАЗЫ (AvailableOrders.tsx)

### Заголовок
- Gradient фон
- Иконка: Search
- Заголовок: "Поиск работы"
- Подзаголовок: "Найдите подходящие заказы"

### Фильтры заказов
- По категории
- По цене (мин-макс)
- По дате
- По типу услуги
- По статусу

### Карточка заказа
**Отображаемая информация:**
- Номер заказа
- Название
- Категория
- Тип услуги (badge)
- Описание
- Цена (GT и ₽)
- Дедлайн
- Статус
- Кнопки действий

**Действия:**
- Просмотр деталей
- Откликнуться на заказ (для исполнителей)

### Типы заказов в списке
- workers - Грузчики
- compressor_rental - Аренда компрессора
- garbage_removal - Вывоз мусора
- complex_service - Комплексная услуга

---

## 7. МОИ ЗАКАЗЫ (Orders.tsx)

### Вкладки
1. **Мои заказы** (как заказчик)
2. **Взятые в работу** (как исполнитель)

### Статусы заказов
- `pending` - Ожидает исполнителя
- `in_progress` - В работе
- `completed` - Завершен
- `cancelled` - Отменен
- `expired` - Истек

### Действия с заказами
- Просмотр деталей
- Редактировать (только pending)
- Отменить
- Завершить (для заказчика)
- Оставить отзыв (после завершения)

---

## 8. ОБЪЯВЛЕНИЯ (Ads.tsx & MyAds.tsx)

### Страница всех объявлений (Ads.tsx)
**Заголовок:**
- Gradient фон
- Иконка: Megaphone
- Заголовок: "Объявления"

**Функции:**
- Просмотр всех активных объявлений
- Фильтрация по категориям
- Поиск
- Просмотр деталей

### Мои объявления (MyAds.tsx)
**Действия:**
- Создать объявление
- Редактировать
- Удалить
- Деактивировать

**Статусы:**
- `active` - Активно
- `inactive` - Неактивно
- `moderated` - На модерации
- `rejected` - Отклонено

---

## 9. СИСТЕМА ПОДДЕРЖКИ

### Создание тикета
- Тема
- Категория
- Приоритет
- Описание проблемы

### Чат с поддержкой
- Реальное время
- Вложения файлов
- История сообщений

### Категории тикетов
- Технические проблемы
- Вопросы по балансу
- Проблемы с заказами
- Другое

---

## 10. СИСТЕМА СООБЩЕНИЙ (ChatSystem.tsx)

### Функции чата
- Список разговоров
- Поиск по сообщениям
- Отправка текста
- Прикрепление файлов
- Реакции на сообщения
- Редактирование сообщений
- Удаление сообщений

### Типы разговоров
- `chat` - Личный чат
- `support` - Поддержка
- `order` - Чат по заказу

### Уведомления
- Новые сообщения
- Упоминания
- Push-уведомления

---

## 11. СИСТЕМА ОТЗЫВОВ

### Создание отзыва (ReviewForm)
**Поля:**
- Рейтинг (1-5 звезд)
- Комментарий
- Заказ (если привязан)

### Отображение отзывов (ReviewCard)
- Аватар автора
- Имя автора
- Рейтинг звездами
- Текст отзыва
- Дата создания
- Связанный заказ

### Модерация отзывов
- Флаг жалобы
- Скрытие отзывов
- Комментарий модератора

---

## 12. АДМИНИСТРАТИВНАЯ ПАНЕЛЬ

### 12.1 Простая админ панель (AdminPanelSimple.tsx)

#### Статистика (карточки)
1. **Пользователи**
   - Иконка: Users
   - Общее количество
   - Синий градиент

2. **Активные заказы**
   - Иконка: ShoppingCart
   - Количество активных
   - Зеленый градиент

3. **Транзакции**
   - Иконка: TrendingUp
   - Сумма за период
   - Фиолетовый градиент

4. **Отзывы**
   - Иконка: Star
   - Общее количество
   - Желтый градиент

#### Вкладки управления
1. **Заказы**
   - Список всех заказов
   - Фильтры по статусу
   - Редактирование
   - Удаление
   - Изменение статуса

2. **Транзакции**
   - Список транзакций
   - Подтверждение/отклонение
   - Просмотр деталей
   - Фильтры

3. **Пользователи**
   - Список пользователей
   - Изменение роли
   - Бан/разбан
   - Просмотр профиля
   - Редактирование баланса

4. **Отзывы**
   - Модерация отзывов
   - Скрытие/показ
   - Удаление
   - Работа с жалобами

5. **Тикеты**
   - Список обращений
   - Назначение исполнителя
   - Изменение статуса
   - Ответы

### 12.2 Расширенная админ панель (AdminPanelNew.tsx)

#### Дополнительные разделы
1. **Аналитика**
   - Графики активности
   - Статистика по периодам
   - Отчеты

2. **Настройки системы**
   - Комиссии
   - Тарифы
   - Ограничения

3. **Промокоды**
   - Создание
   - Управление
   - Статистика использования

4. **Модерация контента**
   - Автоматические правила
   - Очередь модерации
   - Бан-лист слов

5. **Роли и права**
   - Управление ролями
   - Назначение прав

6. **Логи безопасности**
   - История действий
   - Подозрительная активность

7. **Мониторинг производительности**
   - Нагрузка системы
   - Скорость ответа

---

## 13. КОМПОНЕНТЫ UI

### Кнопки (button.tsx)
**Варианты:**
- `default` - основная кнопка
- `destructive` - опасное действие
- `outline` - контурная
- `secondary` - вторичная
- `ghost` - прозрачная
- `link` - ссылка

**Размеры:**
- `default` - обычная
- `sm` - маленькая
- `lg` - большая
- `icon` - только иконка

### Карточки (card.tsx)
- `Card` - основной контейнер
- `CardHeader` - шапка
- `CardTitle` - заголовок
- `CardDescription` - описание
- `CardContent` - содержимое
- `CardFooter` - подвал

### Модальные окна (dialog.tsx)
- `Dialog` - контейнер
- `DialogTrigger` - триггер
- `DialogContent` - содержимое
- `DialogHeader` - шапка
- `DialogTitle` - заголовок
- `DialogDescription` - описание
- `DialogFooter` - действия

### Формы
- `Input` - текстовое поле
- `Textarea` - многострочное поле
- `Select` - выпадающий список
- `Checkbox` - чекбокс
- `RadioGroup` - радио-кнопки
- `Switch` - переключатель
- `Label` - метка

### Уведомления
- `toast` - всплывающее уведомление
- `alert` - предупреждение
- `alert-dialog` - диалог подтверждения

---

## 14. ДИЗАЙН СИСТЕМА

### Цветовая схема (index.css)
**Light режим:**
```css
--background: 0 0% 100%
--foreground: 222.2 84% 4.9%
--primary: 221.2 83.2% 53.3%
--primary-foreground: 210 40% 98%
--secondary: 210 40% 96.1%
--accent: 210 40% 96.1%
--muted: 210 40% 96.1%
--destructive: 0 84.2% 60.2%
```

**Dark режим:**
```css
--background: 222.2 84% 4.9%
--foreground: 210 40% 98%
--primary: 217.2 91.2% 59.8%
--primary-foreground: 222.2 47.4% 11.2%
--secondary: 217.2 32.6% 17.5%
--accent: 217.2 32.6% 17.5%
--muted: 217.2 32.6% 17.5%
--destructive: 0 62.8% 30.6%
```

### Градиенты
```css
--gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary) / 0.8))
--gradient-accent: linear-gradient(135deg, hsl(var(--accent)), hsl(var(--secondary)))
```

### Анимации
```css
--transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
```

### Тени
```css
--shadow-elegant: 0 10px 30px -10px hsl(var(--primary) / 0.3)
```

---

## 15. НАВИГАЦИЯ

### Главное меню (NavigationMenu)
- Главная
- Создать заказ
- Мои заказы
- Поиск работы
- Объявления
- Мои объявления
- Сообщения
- Профиль
- Баланс
- Админ панель (для админов)

### Telegram навигация
- Кнопка "Назад"
- MainButton для действий
- Интеграция с Telegram WebApp

---

## 16. ОСОБЕННОСТИ РЕАЛИЗАЦИИ

### База данных Supabase
**Таблицы:**
- `profiles` - профили пользователей
- `orders` - заказы
- `ads` - объявления
- `transactions` - транзакции
- `conversations` - разговоры
- `messages` - сообщения
- `order_reviews` - отзывы
- `support_tickets` - тикеты поддержки
- `categories` - категории
- `promo_codes` - промокоды
- `user_bans` - баны пользователей
- `admin_logs` - логи действий
- `security_logs` - логи безопасности

### RLS (Row Level Security)
- Пользователи видят только свои данные
- Админы имеют полный доступ
- Модераторы видят контент для модерации

### Edge Functions
- `expire-orders` - автоматическое истечение заказов
- `notify-telegram-promo` - уведомления о промокодах
- `notify-urgent-order` - уведомления о срочных заказах
- `notify-payment` - уведомления об оплате
- `notify-support-ticket` - уведомления о тикетах
- `auth-rate-limiter` - ограничение запросов

### Безопасность
- JWT аутентификация
- Хеширование паролей
- Rate limiting
- XSS защита
- CSRF защита
- Валидация входных данных

---

## 17. МОБИЛЬНАЯ ВЕРСИЯ

### Адаптивность
- Responsive дизайн
- Mobile-first подход
- Touch-friendly элементы
- Swipe жесты

### Telegram интеграция
- WebApp API
- Haptic Feedback
- Theme colors
- Main button
- Back button

---

## 18. УВЕДОМЛЕНИЯ

### Типы уведомлений
- Новое сообщение
- Новый заказ
- Отклик на заказ
- Изменение статуса заказа
- Пополнение баланса
- Новый отзыв
- Ответ поддержки

### Каналы уведомлений
- В приложении (toast)
- Push-уведомления
- Email (опционально)
- Telegram (через бот)

---

## 19. МОДЕРАЦИЯ

### Автоматическая модерация
- Фильтр запрещенных слов
- Проверка спама
- Лимиты на действия

### Ручная модерация
- Очередь на проверку
- Причины блокировки
- История модерации

### Действия модератора
- Скрыть контент
- Заблокировать пользователя
- Удалить контент
- Предупреждение

---

## 20. АНАЛИТИКА

### Метрики
- Активные пользователи
- Новые регистрации
- Созданные заказы
- Выполненные заказы
- Оборот средств
- Средний чек
- Конверсия

### Отчеты
- По периодам
- По категориям
- По пользователям
- По исполнителям

---

## 21. ТЕХНОЛОГИЧЕСКИЙ СТЕК

### Frontend
- React 18.3.1
- TypeScript
- Vite
- Tailwind CSS
- shadcn/ui
- React Router 6
- React Query (TanStack)
- Lucide Icons

### Backend
- Supabase (PostgreSQL)
- Edge Functions (Deno)
- Row Level Security
- Realtime subscriptions

### Дополнительно
- date-fns - работа с датами
- zod - валидация
- react-hook-form - формы
- sonner - уведомления
- recharts - графики

---

## 22. ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ

```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_anon_key
```

---

## 23. СТРУКТУРА ПРОЕКТА

```
src/
├── components/         # Компоненты
│   ├── ui/            # UI компоненты
│   ├── admin/         # Админ компоненты
│   └── ...            # Остальные компоненты
├── pages/             # Страницы
├── hooks/             # Кастомные хуки
├── lib/               # Утилиты
├── services/          # API сервисы
├── types/             # TypeScript типы
├── utils/             # Вспомогательные функции
├── integrations/      # Интеграции (Supabase)
├── data/              # Статические данные
└── config/            # Конфигурация
```

---

## 24. ОСНОВНЫЕ ФУНКЦИИ

### Для заказчиков
1. Создание заказов всех типов
2. Управление заказами
3. Поиск исполнителей
4. Оплата через баланс GT
5. Оставление отзывов
6. Чат с исполнителями

### Для исполнителей
1. Просмотр доступных заказов
2. Отклик на заказы
3. Выполнение работы
4. Получение оплаты на баланс
5. Создание объявлений
6. Получение отзывов

### Для администраторов
1. Управление пользователями
2. Модерация контента
3. Управление заказами
4. Обработка транзакций
5. Работа с тикетами
6. Просмотр аналитики
7. Настройка системы
8. Управление промокодами

---

## 25. БИЗНЕС-ЛОГИКА

### Жизненный цикл заказа
1. **Создание** - заказчик создает заказ
2. **Публикация** - заказ появляется в списке
3. **Отклик** - исполнитель откликается
4. **Принятие** - заказчик выбирает исполнителя
5. **В работе** - выполнение заказа
6. **Завершение** - заказчик подтверждает
7. **Оплата** - перевод средств исполнителю
8. **Отзыв** - обмен отзывами

### Управление балансом
- Пополнение через админа
- Холдирование средств при создании заказа
- Перевод после завершения
- Возврат при отмене

### Система рейтинга
- Расчет среднего рейтинга
- Учет количества отзывов
- Влияние на позиции в поиске

---

## ИТОГО

Это полное описание всех функций, компонентов, страниц и логики приложения GT WorkHub. 

По этому документу можно воссоздать приложение с нуля, включая:
- Все UI компоненты
- Бизнес-логику
- Структуру базы данных
- Систему ролей и прав
- Все типы заказов
- Административные функции
- Дизайн систему

Документ содержит точное описание каждой кнопки, поля, функции и экрана приложения.
